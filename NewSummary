<ItemGroup>
  <PackageReference Include="ParentPackage" Version="x.y.z">
    <ExcludeAssets>MessagePack</ExcludeAssets>
  </PackageReference>
  <PackageReference Include="MessagePack" Version="2.5.187" />
</ItemGroup>

<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.SignalR.Redis" Version="1.1.5" />
    <PackageReference Include="MessagePack" Version="1.7.3.7">
      <ExcludeAssets>All</ExcludeAssets>
    </PackageReference>
  </ItemGroup>

</Project>

Kindly find the attached Excel file containing the service URL mapping.

Please note that the latest 24.12 changes have not yet been merged. Once these changes are merged and deployed to the endpoints listed, we will notify you. In the meantime, some URLs may be inaccessible or may not return the latest results. Rest assured, we are actively working on the code merge and deployment across all environments up to QA Stress. We expect everything, including any necessary code-fix release changes, to be ready for QA by 12/20.

Hi Dan,

We have successfully completed the Milestone 2 service migration. We have received PPV sign-off.
We had 2 services(Careplan and Fax) which was toggled OFF after first milestone, the issue is fixed and pointing to On-Prem. Two leftover consuming applications(Letter Angular and User) are now pointing to On-Prem services.  
Four milestone2 Services – Member,Exernal,MDReview and Pushnotifications are now deployed in On-Prem and all consuming applications except ACE/IIB are now pointing to on-prem.
We will continue monitoring the performance of the on-prem services for a few days.
Here is the summary of Milestone 2:

**Subject:** Milestone 2 Service Migration - Completion Summary  

Hi Dan,  

We’ve successfully completed the Milestone 2 service migration and received the PPV sign-off.  

Here are the key updates:  
- Two services (Careplan and Fax), which were toggled OFF after the first milestone, are now fixed and pointing to On-Prem.  
- The two remaining consuming applications (Letter Angular and User) have also been updated to point to the On-Prem services.  
- Four Milestone 2 services – Member, External, MDReview, and Pushnotifications – are now deployed on On-Prem. All consuming applications, except ACE/IIB, are now pointing to these On-Prem services.  

We will continue to monitor the performance of the On-Prem services over the next few days.  

Here’s a summary of Milestone 2:  
Hi Sunil,

I encountered some issues while claiming tasks for the week, but I’ve managed to resolve them and can fill them in now. However, I’m unable to enter backdated hours in my timesheet as it appears frozen. Could you please assist me with this?

Thanks,
Arjun 

Are we good with the turn today for faxservice and letter angular deployment?

Thank you, Rahul, for sharing the Dynatrace details for the CareHub services. We will further investigate the setup process and prepare a plan before the Milestone 3 KT session.


Hi Ranjita,

Thank you for sharing the updated plan. We are aligned with the revised timeline for M1 and M2, and it works well for us.

I will reach out to you on or before December 20th to share the branch details for the ClinicalAuthorization service (M3). The teams will need to down-merge the code into the Release 25.01 branch and deploy it to the On-Prem lower environments (QA1).

Additionally, I want to confirm that you are aligned with the approach that all testing for Release 25.01 will be conducted using the On-Prem URL for the ClinicalAuthorization service.

Thank you,
Arjun

Hi Ravali,

We are in touch with the Regression and Load Test teams, and the test results will be shared with the team as soon as we receive them. Please find our responses to your queries below:

Please plan to perform Conviva user testing for Milestone 2
-- We have already communicated with the Conviva support team regarding the Endpoint changes. We are currently waiting for their confirmation on PPV support.

Please advise what is the plan for cleaning up Milestone 1 related changes like hits from Letters PowerShell scripts, IMP screens, etc.
-- The Dev team will first verify the IMP screens locally. Following this, we will deploy the IMP application to a lower environment for testing. The DevOps team will update the PowerShell endpoint in Letters during the Integrated Release 24.12.

For the standalone services for Milestone 3, please plan on implementing Dynatrace monitors for the Windows service
-- Currently, there is no separate monitoring in place for Windows services. If needed, we can discuss the setup process and create an action plan after the Milestone 2 release.

Please confirm whether we are having separate App Pools for each of the services and we are not clubbing together any of the app pools during IIS setup
-- Yes, we have separate App Pools for each application.

Please make sure to check Logs Tables for any new errors captured during regression, and please confirm what trend we are providing to the storage team on adding CPU
-- The Regression and Load Testing teams will capture CPU trends during the load tests, and we will share these results with the team once they are available.

Thanks,
Arjun


Hi Gomathy,

I hope you're doing well.

Could you please assist in adding tasks to my timesheet? I’ve been unable to log my hours since last Friday (12/06) because the assigned Dev activity task (20729033) is not available. Additionally, could you kindly fill in the hours for Friday, as the timesheet is currently frozen?

Thank you for your help!

Best regards,
Arjun


One of our Milestone2 services, *FaxDisposition*, is currently in the load testing phase. Could you kindly let us know once your final changes are merged for Release24.12? This will allow us to incorporate them into our branch and plan for FLD after 24.12.

Hi Sowjanya,

We have decided to proceed with a direct URL change and remove the toggle functionality. Since the Letters service has been live in production for a few weeks now, the toggle changes have become redundant. Additionally, there won’t be any further Pioneer deployments for Letters moving forward.

I hope this approach makes sense. I will raise a PR to remove all redundant changes except for the URL update and will keep you informed.

Thanks,
Arjun

Subject: Assistance Needed for Code Freeze Alignment for Milestone 3 Services

Hi Carine,

We are nearing the completion of the development and deployment of Milestone 2 services up to QA. However, we have a few dependencies on applications managed by the UM team and need support with code freeze alignment for the Clinical Authorization Milestone 3 service.

CGX-External Service Migration:
We are migrating the CGX-External service from Pioneer to On-prem. During the codebase analysis, we identified two ACE applications—UMRules and IIB.Environments—that are consuming this service. It is essential to coordinate with the IIB team to notify them about this migration and ensure they update the service URL on their end to maintain functionality.

Letters Service Update:
The Letters service migration was completed in Milestone 1. However, we observed that the ACE.Letter application is still consuming the Pioneer service. Similar to the above, coordination with the IIB team is required to inform them about the migration and to update the URL to the On-prem version.

Clinical Authorization Service Alignment:
For the Clinical Authorization service scheduled for Milestone 3, we noticed ongoing development by the team. To ensure smooth progress, we need to align on a code freeze date, assuming there are no changes planned for 25.01. If alignment on the code freeze is not possible, clear communication will be necessary. Specifically, the team should begin working on the migration branch (from Pioneer to On-prem) that we will provide.

Looking forward to your guidance and support to ensure a smooth transition.

Hi Team,

Could you please retrigger the scans for the following Milestone 2 services? We have implemented a couple of code fixes and checked them in, but the updates are not yet reflecting the correct state:
Additionally, developers, we need to improve the scores for these services. Please prioritize this, as it could become a blocker for us.

Thanks,
Arjun

Could you please retrigger the scans for the below Milestone 2 services, we have made couple of code fixes and checked in the code. However, it’s still not reflecting the correct state-

6902891	APPSVC070383	D-D	M2-Cgx-External: Migration of Cgx-External Pioneer to On-Premises Service
6902950	APPSVC051399	D-D	M2-Cgx-CGXMDReview (UMAPI): Migration of CGX MD Review (UMAPI) Pioneer to On-Premises Service
6938238	APPSVC056425	D-D	M2-Cgx-PushNotification: Migration of Cgx-PushNotification Pioneer to On-Premises Service
6938723	APPSVC055299	D-D	M2-CGXPushNotification - Consuming application 3 - Common Service

Devs, we need to get the score up for the aforementioned services, please start working on it otherwise it would be a blocker for us.

Thanks,
Arjun


# Main function
def main_job():
    with requests.Session() as s:
        while True:
            Status = ''
            while Status != 'Done':
                msg, Status = get_messages(s)
                if msg is not None:
                    auth_type = auth_check2(msg)
                    if auth_type == 'Medicare Inpatient Auth' and msg is not None:
                        df_m, d1, d2, dr_df, Status = main(msg, s)
                        df_m2 = disch_dt(d1, df_m)
                        header = {
                            'X-Humana-Clinical-Api-Key': app.cgx_header_api_key,
                            'Content-Type': "application/json;charset=UTF-8",
                        }
                        df_cgx = df_m2.to_dict(orient='records')
                        if df_cgx is None or len(df_cgx) < 1:
                            continue
                        data2post = json.dumps(df_cgx[0])
                        print('POST CGX API to update UI')
                        notificationResponse = s.request(
                            "POST",
                            app.cgx_url,
                            verify=False,
                            data=data2post,
                            headers=header,
                        )
                        print(
                            'Request completed with status: '
                            f"{notificationResponse.status_code}"
                        )
                        print(
                            'PAT Eligibility Determination Completed - '
                            f"{str(datetime.now())}"
                        )
                        Status = 'Done'
                    else:
                        print(auth_type)
                        print(
                            'PAT Eligibility Determination Completed - '
                            f"{str(datetime.now())}"
                        )
                        Status = 'Done'
                else:
                    print('No messages available in queue')
                    Status = 'Done'

# Keep the script running indefinitely
if __name__ == "__main__":
    while True:
        try:
            main_job()
        except Exception as e:
            print(f"An error occurred: {e}")
            print("Restarting the script...")
            time.sleep(10)  # Wait 10 seconds before restarting

As you are aware, we were unable to deploy the Letters Angular application to production due to existing package compatibility issues with the Angular version. Additionally, the security clearance could not be obtained with the current 'C' grade. Therefore, I believe the latest codebase has not been deployed in environments other than QA3. I recommend deploying the latest code to the Test, INT, and QA2 environments for further testing.

#!/usr/bin/env python
# coding: utf-8

import pandas as pd
from pandas import json_normalize
import json
import requests
from datetime import datetime
import os
import ml_mq_config
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
import priors
import joblib
import sys

PAT_ELIGIBLE_CLF = joblib.load("model_pat_eligible.pkl")
PAT_LOS_CLF = joblib.load("model_los.pkl")

# MODEL_COLUMNS = ['auth_cov_issue_state', 'auth_cov_network_id', 'auth_cov_product_cd',
       # 'auth_grouper_id', 'auth_grouper_name', 'auth_mbr_pcp_name',
       # 'auth_request_type', 'diag_1_code', 'diag_2_code', 'diag_3_code',
       # 'diag_4_code', 'diag_1_cat_code', 'diag_2_cat_code', 'diag_3_cat_code',
       # 'diag_4_cat_code', 'src_case_id', 'facility_npi', 'facility_tin',
       # 'proc_1_code', 'proc_1_code_desc', 'proc_2_code', 'proc_2_code_desc',
       # 'requesting_provider_npi', 'requesting_provider_tin',
       # 'treating_provider_npi', 'treating_provider_tin',
       # 'auth_grouper_id_hit_diff', 'auth_mbr_pcp_name_hit_diff',
       # 'diag_1_code_hit_diff', 'facility_npi_hit_diff',
       # 'facility_tin_hit_diff', 'requesting_provider_npi_hit_diff',
       # 'requesting_provider_tin_hit_diff', 'treating_provider_npi_hit_diff',
       # 'treating_provider_tin_hit_diff']

dict_product = {'EPO / CAS': 'EPO', 'HML / MTV': 'HML', 'HMO / CAS': 'HMO', 'HMO / MTV': 'HMO', 'IND / CAS': 'IND', 'IND / MTV': 'IND', 'IPP / MTV': 'IPP', 'IPS / MTV': 'IPS', 'MCD / CAS': 'MCD', 'MCD / MTV': 'MCD', 'MEF / CAS': 'MEF', 'MEP / CAS': 'MEP', 'MER / CAS': 'MER', 'MES / CAS': 'MES', 'MGP / CAS': 'MGP', 'MGR / CAS': 'MGR', 'MRO / CAS': 'MRO', 'NPOS / MTV': 'NPOS', 'POS / CAS': 'POS', 'POS / MTV': 'POS', 'PPO / CAS': 'PPO', 'PPO / MTV': 'PPO', 'RSK / MTV': 'RSK'}

medicare_lobs = ['MES','MER','MGR','MRO','MGO','MGP','MRP','MDG','MDI','MOG','MOI','MEP','MRA',
                 'MPI','MPG','MCI','MCG','MEF','MGF','MPA','MED']

if os.getenv('APP_SETTINGS', 'config.DevelopmentConfig') == 'config.DevelopmentConfig':
    app = ml_mq_config.DevelopmentConfig
elif os.getenv('APP_SETTINGS', 'config.DevelopmentConfig') == 'config.IntConfig':
    app = ml_mq_config.IntConfig
elif os.getenv('APP_SETTINGS', 'config.DevelopmentConfig') == 'config.QAConfig':
    app = ml_mq_config.QAConfig
elif os.getenv('APP_SETTINGS', 'config.DevelopmentConfig') == 'config.StressConfig':
    app = ml_mq_config.StressConfig
else:
    app = ml_mq_config.ProductionConfig

app = ml_mq_config.ProductionConfig
    
def get_auth_info(doc):
    mbr_cols = ['StateOfIssue','GrouperId','GrouperName','PCPName','NetworkId','Product','SalesChannelLOB','LOB']
    df_mbr_tmp = json_normalize(doc.get('MemberInformation'))
    df_mbr = df_mbr_tmp[mbr_cols].reset_index().drop('index',axis=1)
    df_mbr['auth_cov_product_cd'] = df_mbr['Product'].map(dict_product)
    df_mbr['auth_cov_issue_state'] = df_mbr['StateOfIssue']
    df_mbr = df_mbr.drop(['Product','StateOfIssue'],axis=1)
    final_mbrs = df_mbr.rename({'NetworkId':'auth_cov_network_id','GrouperId':'auth_grouper_id',
                                'GrouperName':'auth_grouper_name','PCPName':'auth_mbr_pcp_name'},axis=1)
    auth_cols = ['AdmissionDate','CreatedDate','DischargeDate','RequestTypeCode','OverallAuthStatus',
             'AuthTypeCode','AuthId','AuthType']
    df_auth_tmp = json_normalize(doc.get('AuthorizationInformation'))
    df_auth = df_auth_tmp[auth_cols].reset_index().drop('index',axis=1)
    final_auth = df_auth.rename({'RequestTypeCode':'auth_request_type','AuthId':'src_auth_id'},axis=1)
    provcols = ['FacilityProvider.Npi','FacilityProvider.Tin',
            'RequestingProvider.Npi','RequestingProvider.Tin',
            'TreatingProvider.Npi','TreatingProvider.Tin']
    df_prov_tmp = json_normalize(doc.get('ProviderInformation'))
    df_prov = df_prov_tmp[provcols]
    full_prov = df_prov.rename({'FacilityProvider.Npi': 'facility_npi',
                                'FacilityProvider.Tin': 'facility_tin',
                                'RequestingProvider.Npi': 'requesting_provider_npi',
                                'RequestingProvider.Tin': 'requesting_provider_tin',
                                'TreatingProvider.Npi': 'treating_provider_npi',
                                'TreatingProvider.Tin': 'treating_provider_tin'},axis=1)
    diag_tmp = pd.DataFrame(columns=['diag_1_code','diag_2_code','diag_3_code','diag_4_code'])
    primarydiag = json_normalize(doc.get("MedicalCodeInformation"))['PrimaryDiagnosisCode.Code'][0]
    if doc.get("MedicalCodeInformation")['SecondaryDiagnosisCodes'] == None:
        diag = diag_tmp.append({'diag_1_code':primarydiag},ignore_index=True)
    elif len(json_normalize(doc.get("MedicalCodeInformation"))['SecondaryDiagnosisCodes'][0]) > 1:
        diagothers = json_normalize(doc,record_path=[['MedicalCodeInformation','SecondaryDiagnosisCodes']])
        diagothers['id'] = diagothers.index + 2
        diagothers['cd'] = 'diag_'+diagothers.id.astype(str)+'_code'
        diag2 = diagothers.pivot_table(columns='cd',values='Code',aggfunc=max).reset_index()
        diag = diag_tmp.append(diag2,sort=True)
        diag['diag_1_code'] = primarydiag
    else:
        diag = diag_tmp.append({'diag_1_code':primarydiag},ignore_index=True)       
    if json_normalize(doc.get("MedicalCodeInformation"))['ProcedureCodes'].count() > 0:
        proccodes_tmp = json_normalize(doc,record_path=[['MedicalCodeInformation','ProcedureCodes']])
        proccodes_tmp = proccodes_tmp[['Code','FullDescription']]
        proccodes_tmp['id'] = proccodes_tmp.index + 1
        proccodes_tmp['cd'] = 'proc_'+proccodes_tmp.id.astype(str)+'_code' 
        proccodes_tmp['desc'] = 'proc_'+proccodes_tmp.id.astype(str)+'_code_desc'
        proc1 = (proccodes_tmp
                 .pivot_table(columns='cd',values='Code',aggfunc=max)
                 .reset_index().drop('index',axis=1))
        proc2 = (proccodes_tmp
                 .pivot_table(columns='desc',values='FullDescription',aggfunc=max)
                 .reset_index().drop('index',axis=1))
        proc = pd.concat([proc1,proc2],axis=1)
    else:
        proc = pd.DataFrame(columns=['proc_1_code','proc_1_code_desc',
                                     'proc_2_code','proc_2_code_desc'])
    setup = pd.concat([final_mbrs,final_auth,full_prov,diag,proc],axis=1)
    setup['AuthGuid'] = doc.get('AuthGuid')
    final_cols = ['auth_cov_issue_state','auth_cov_network_id','auth_cov_product_cd',
    'auth_grouper_id','auth_grouper_name','auth_mbr_pcp_name','auth_request_type',
    'diag_1_code','diag_2_code','diag_3_code','diag_4_code',
    'facility_npi','facility_tin','proc_1_code','proc_1_code_desc','proc_2_code',
    'proc_2_code_desc','requesting_provider_npi','requesting_provider_tin','src_auth_id',
    'treating_provider_npi','treating_provider_tin','AuthGuid']
    final_setup = pd.DataFrame(columns=final_cols)
    cols = ['requesting_provider_npi',
            'requesting_provider_tin',
            'treating_provider_npi',
            'treating_provider_tin',
            'facility_npi',
            'facility_tin']
    for col in cols:
        final_setup[col] = final_setup[col].fillna(0)
    final_tmp = final_setup.append(setup,sort=True)
    filter = ((final_tmp['AuthTypeCode'] == 1) & (final_tmp['LOB'].isin(medicare_lobs)))
    final_tmp2 = final_tmp[filter]
    final = final_tmp2[final_cols]
            
    return final_tmp, final


def auth_check2(doc2):
    if 'AuthorizationInformation' in doc2:
        Auth_type_code = json_normalize(doc2.get('AuthorizationInformation'))['AuthTypeCode'][0]
    auth_lob = json_normalize(doc2.get('MemberInformation'))['LOB'][0]
    if Auth_type_code != 1 or auth_lob not in medicare_lobs:
        value = "Not Medicare Inpatient Authorization"
    else:
        value = "Medicare Inpatient Auth"
    return value


def add_priors(df):
    try:
        for col in df.columns:
            if col in priors.lookup.keys():
                prior = priors.lookup[col]
                for i, v in df[col].items():
                    df[col+'_hit_diff'] = prior[v] if v in prior else 0.
    except Exception as e:
        print("Something went wrong fetching priors: " + str(e))
    return df


def predict_pat_eligible(df):
    scr = None
    try:
        print(df.to_csv(sep='|'))
        scr = PAT_ELIGIBLE_CLF.predict(df)[0]
        print('Scored PAT: ' + str(scr))
    except Exception as e:
        print("Something went wrong with scoring eligibility: " + str(e))
    return scr


def predict_los(df):
    scr = None
    try:
        scr = int(PAT_LOS_CLF.predict(df)[0])
        print('Scored LOS: ' + str(scr))
    except Exception as e:
        print("Something went wrong with scoring LOS: " + str(e))
    return scr


def get_pat_elig(df1):
    if df1.empty == False:
        print('Predicting Eligibility Indicator')
        predict = predict_pat_eligible(df1)
        df_new = df1.copy()
        df_new['prediction'] = predict
        df_pp2 = df_new
        df_pp2['Pateligible'] = df_pp2['prediction'].map({1.0:'Eligible',0.0:'Not Eligible'})
        df_pp2 = df_pp2[df_pp2['Pateligible'] == 'Eligible']
    else:
        df_pp2 = pd.DataFrame()
        predict = None        
    return df_pp2, predict


def get_los(df1):
    df1 = add_priors(df1)
    add_cat = lambda x: x.split('.')[0] if '.' in x else ''
    df1['diag_1_cat_code'] = df1['diag_1_code'].apply(add_cat)
    df1['diag_2_cat_code'] = df1['diag_2_code'].apply(add_cat)
    df1['diag_3_cat_code'] = df1['diag_3_code'].apply(add_cat)
    df1['diag_4_cat_code'] = df1['diag_4_code'].apply(add_cat)

    df_step_2_upload, pat_predict = get_pat_elig(df1)
    if df_step_2_upload.empty == False:
        print('Predicting DRG LOS')
        predict = predict_los(df_step_2_upload)
        df_new = df1.copy()
        df_new['prediction'] = predict
        df_los2 = df_new
        df_los2['Pateligible'] = 'Eligible'
        df_los2['PatDrgLos'] = df_los2['prediction']
        df_los2 = df_los2.drop(columns = ['prediction'])
    else:
        df_los2 = df1.copy()
        df_los2['Pateligible'] = "Not Eligible"  
        df_los2['PatDrgLos'] = None
    return df_los2


def get_messages(session):
    message = None
    check = None
    get_header = {'Content-Type': "application/json;charset=UTF-8"}
    try:
        print('GET MQ API to fetch the next message')
        print('Requesting data from {0}'.format(app.queue_url))
        data = session.request("GET",
                                app.queue_url,
                                verify=False,
                                headers=get_header)
    except requests.exceptions.RequestException as e:
        print(e)
        return message, check

    try:
        print('Request completed with status code: {0}'.format(data.status_code))
        
        data = data.json()
        
        if 'content' in data and data['content'] != '':
            message = json.loads(data['content'])
            print('Processing authId: ' + message.get('AuthorizationInformation')['AuthId'])
        else:
            check = 'Done'
            message = None
    except (TypeError, KeyError, AttributeError, ValueError) as e:
        print('An error occurred attempting to parse json, no authId available.')
        check = 'Done'
        message = None 

    return message, check


def main(message, session):
    df1 = pd.DataFrame() 
    df2 = pd.DataFrame()
    dr_df = pd.DataFrame()
    status_check = ''
    try:
        t2 = datetime.now()
        df1, df2 = get_auth_info(message)
        
    except Exception as e:
        print("Issue with running for loop in message")
        print(e)
        status_check = 'Done'
    if df2.empty:
        print("No Inpatient Authorizations to Score")
        df_merge = df2       
    else:
        try:
            df2 = df2.fillna("")
            dr_df = get_los(df2)
            df_merge = df2.merge(dr_df[['src_auth_id','AuthGuid','Pateligible','PatDrgLos']],
                                on=['src_auth_id','AuthGuid'],how='left')
        except Exception as e:
            print("Auth is unable to score")
            print(e)
            df_merge = df2
            df_merge['Pateligible'] = "Not Eligible"  
            df_merge['PatDrgLos'] = None
    return df_merge, df1, df2, dr_df, status_check


'''
PAT Eligible calculation - The function below executes on this logic

(Todays date - Discharge date )  <= 3 days
and 
LOS (Discharge Date - Admission date) <= ML PAT DRG LOS Days

PAT will not be Eligible on the below scenarios 
(Todays date - Discharge date )  > 3 days
(or)
LOS (Discharge Date - Admission date) >  ML PAT DRG LOS Days
'''
def disch_dt(a,b):    
    c_dict = {}
    if b.empty:
        d = b
    else:
        a['today'] = pd.to_datetime('today', utc=True, errors='coerce')
        a['days_since_discharge'] = (a['today'] - (pd.to_datetime(a['DischargeDate'], utc=True, errors='coerce'))).dt.days + 1
        a['Actual_LOS'] = (pd.to_datetime(a['DischargeDate'], utc=True, errors='coerce') - pd.to_datetime(a['AdmissionDate'], utc=True, errors='coerce')).dt.days + 1
        c = pd.merge(b,a[['src_auth_id','AdmissionDate','AuthGuid','Actual_LOS','DischargeDate','today','days_since_discharge']],
                     on=['src_auth_id','AuthGuid'],how='left',sort=True)
        c_dict = c.to_dict(orient='records')
        for row in c_dict:
            if row['AdmissionDate'] != None and row['DischargeDate'] != None:
                if row['days_since_discharge'] > 3 or (row['PatDrgLos'] != None and row['Actual_LOS'] > float(row['PatDrgLos'])):
                    row['Pateligible'] = "Not Eligible"
                    row['PatDrgLos'] = None
            else:
                print('The auth is missing required information. AdmissionDate: {0}, DischargeDate{1}'.format(row['AdmissionDate'], row['DischargeDate']))
                
        d = pd.DataFrame.from_dict(c_dict,orient='columns')
        d = d[['src_auth_id','AuthGuid','Pateligible','PatDrgLos']]
        d = d.rename(columns={'src_auth_id':"AuthId","Pateligible":'PatEligibility'})
    return d


with requests.Session() as s:
    while True:
        Status = ''
        while Status != 'Done':
            msg, Status = get_messages(s)
            if msg != None:
                auth_type = auth_check2(msg)
                if auth_type == 'Medicare Inpatient Auth' and msg != None:
                    df_m, d1, d2, dr_df, Status = main(msg, s)
                    df_m2 = disch_dt(d1,df_m)
                    header = {'X-Humana-Clinical-Api-Key':app.cgx_header_api_key,
                       'Content-Type': "application/json;charset=UTF-8"}
                    df_cgx = df_m2.to_dict(orient='records')
                    if df_cgx is None or len(df_cgx) < 1:
                       continue
                    data2post = json.dumps(df_cgx[0])
                    print('POST CGX API to update UI')
                    notificationResponse = s.request("POST", 
                                                    app.cgx_url, 
                                                    verify=False,
                                                    data=data2post,
                                                    headers=header)
                    print('Request completed with status: '.format(notificationResponse.status_code))
                    print('PAT Eligibility Determination Completed - %s'%str(datetime.now()))
                    Status = 'Done'
                else:
                    print(auth_type)
                    print('PAT Eligibility Determination Completed - %s'%str(datetime.now()))
                    Status = 'Done'
            else:
                print('No messages available in queue')
                Status = 'Done'
raise RuntimeError('The session unexpectedly terminated')

Incident: INC3338859
Blot:
There was failure noticed for one specific Fax template in prod and was brought to attention on 11/25.
RC:
One of the fixes made by App team to make to new template functional, was not merged from their local branch to main branch when On-perm changes were deployed.
Event history:
Tech wizard team moved a new template inclusion change for 24.11 release on 11/15.
Prod build was taken based on 11/10, but incremental 24.12 changes were check-in made till in main branch till 11/13 as the team follow single branch approach
On-perm migration changes were merged to ‘Main’ branch on 11/18 and turned to prod on 11/21 and toggled on.
Issue reported in prod for the specific template in 11/25.
Our Observation:
The incremental code added for 24.12 by app team in main branch during the 24.11 release window did not have toggle, team mentioned it’s an independent change and should impact 24.11 changes
However, there was fix made for 24.12 just before the on-perm changes moved, was added to main stating there was code freeze window between 11/15 and 11/21.
The code freeze was to protect any new feature addition, but TE was not made aware of that this fix is essentially to prod code to be stable, despite lot of collaboration involved.
Immediate solution:
Fax service on-perm is toggled off and pointed back to pioneer.
Next action:
Missed fixed will be added by app team and Rollin with 24.12 and then toggle on.


Hi Dan,

Setting up a quick connect today to discuss the following outstanding items for the Milestone 2 and 3 releases, as well as last week's production incidents:

Clinical Auth API (ACE dependency)
Python application (DevOps/External Team dependency)
Fax service issue (Code freeze)
Additionally, we need to address the code freeze for the Clinical Auth API required for the January release.

Looking forward to your input.

Discussion: Outstanding Items for Milestones 2 & 3 and Code Freeze Updates


Hi Dan,

We investigated the care plan exhaust issue and identified a condition that reads the certificate from the Vault. However, the certificate name being pulled from the Vault was incorrect. We’ve updated it and deployed the fix to QA3. We'll schedule a round of regression testing, and the fix can be deployed during the earliest available window.

<Exception><Type>System.Runtime.Serialization.SerializationException</Type><Message>Error in line 1 position 69. Expecting element 'ApiError' from namespace 'http://schemas.datacontract.org/2004/07/Humana.Clinical.Core.MVC'.. Encountered 'Element'  with name 'Envelope', namespace 'http://schemas.xmlsoap.org/soap/envelope/'.</Message><Source>System.Private.DataContractSerialization</Source><StackTrace>   at System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName)
   at System.Runtime.Serialization.DataContractSerializer.ReadObject(XmlReader reader)
   at System.Net.Http.Formatting.XmlMediaTypeFormatter.ReadFromStream(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
   at System.Net.Http.Formatting.XmlMediaTypeFormatter.ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)


context.Response.Headers.Add(
    "Content-Security-Policy", 
    "default-src 'self' https://*.humana.com  https://*.humana.local https://*.humana.com:* wss://*.humana.com;script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.humana.com https://cdn.walkme.com;" +
    "style-src 'self' 'unsafe-inline' https:;img-src 'self' https: data:; " +
    "font-src 'self' https: data:;" +
    "object-src 'none';" +
    "script-src 'self';");
context.Response.Headers.Add("X-XSS-Protection", "1; mode=block");
context.Response.Headers.Add("X-Frame-Options", "SAMEORIGIN");
context.Response.Headers.Add("Referrer-Policy", "strict-origin-when-cross-origin");
context.Response.Headers.Add("X-Content-Type-Options", "nosniff");
context.Response.Headers.Add("Pragma", "no-cache");
context.Response.Headers.Add("Cache-Control", "no-cache");
context.Response.Headers.Add("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
context.Response.Headers.Add("Access-Control-Allow-Headers", "content-type, origin, accept,x-humana-clinical-api-key,authorization, Cache-Control, Pragma");

We will continue monitoring the performance of the on-prem services for a few days.
Completion of Milestone 1 Service Migration

Hi Dan,

We have successfully completed the Milestone 1 service migration. We have received PPV sign-off and confirmation from Conviva that the application is accessible on their end.

There are four consuming applications where toggles couldn't be added; the URL updates for these will be addressed as part of Milestone 2.

Here’s a summary of Milestone 1:

Kindly enable the following toggles after the service deployment on 11/21-
Hi Dan,

Just a quick update: we have received sign-offs from SIT, UAT, and Load Testing. We are currently coordinating with the SRE team to obtain approvals for the change order.

Hi Karka,

We have completed regression and UAT testing for all impacted areas concerning the Pioneer-to-On-Prem migration. At this stage, further validation phases cannot be accommodated, as the production release is scheduled for tonight.

As you are aware, a toggle flag has been implemented, allowing us to disable the feature immediately if any issues arise, ensuring minimal disruption to operations.

Given these constraints, I request your prompt approval for the required conditional sign-off to proceed as planned.

Hi Venkanna,

We have learned that QA3 is not the appropriate environment to validate this flow, as our single environment, EMME, is currently pointing to QA2, which does not include our on-prem code changes. However, the letter creation flow has been validated from our side, so we should not be blocked by this environment constraint. Therefore, I kindly request you to defer this defect to QA2 so the respective team can address the issue.

Hi Venkanna,

We have learned that QA3 is not the appropriate environment to validate this flow, as our single environment, EMME, is currently pointing to QA2, which does not include our on-prem code changes. Therefore, I kindly request you to defer this defect to QA2 so the respective team can address the issue.

Thank you for pointing out the error messages in your previous email. After reviewing the currently deployed production codebase, we found the same errors present in the existing codebase. This indicates that these issues are not a result of our platform migration efforts. I suggest initiating a separate investigation for this, as it doesn't appear to be a blocker for us. Please find the screenshot attached.


Hi Carolyn,

I understand this is a late PPV inclusion to the team, but I don’t anticipate significant issues with the transition from Pioneer to On-prem. As I previously communicated to the team, this is an existing domain, and if it has been whitelisted by Conviva systems as mentioned, we shouldn't experience any downtime or issues. Since no functional changes were introduced during the migration activity, a basic sanity check should suffice.

Subject: UAT and Post-Prod Validation Request

Hi Team,

This is a quick update to inform you that the following services have been deployed to QA3. Could you please perform a round of UAT from your application to ensure there are no issues?

We are planning to proceed with the production release tomorrow night between 9–11 PM EST. Would it be possible for you to conduct a Post-Production Validation (PPV) during that time? If so, kindly share your contact details so we can coordinate effectively after the release.

Thank you!

Hi Shivasankar, the migration changes have been successfully deployed to QA3, and the toggles are now enabled. You may proceed with the scheduled activities.

Hi Shivasankar, all the migration changes are now deployed in QA3 and toggles are enabled now. Please start the scheduled activities.


<PackageReference Include="System.IO.Packaging" Version="4.7.0" ExcludeAssets="all" />

2024-11-18T16:03:26.6988292Z   GET https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/system.security.cryptography.cng/4.5.0
2024-11-18T16:03:26.7006785Z   OK https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/system.security.principal.windows/4.5.0 125ms
2024-11-18T16:03:26.7668496Z   OK https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/system.security.cryptography.cng/4.7.0 88ms
2024-11-18T16:03:26.7949050Z   OK https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/microsoft.netcore.dotnetapphost/2.0.7 129ms
2024-11-18T16:03:26.8225128Z   OK https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/system.security.cryptography.cng/4.5.0 123ms
2024-11-18T16:03:26.8679778Z Resolving conflicts for net6.0...
2024-11-18T16:03:26.8919636Z Checking compatibility of packages on .NETCoreApp,Version=v2.2.
2024-11-18T16:03:26.9057090Z All packages and projects are compatible with .NETCoreApp,Version=v2.2.
2024-11-18T16:03:26.9167558Z Value cannot be null.
2024-11-18T16:03:26.9167917Z Parameter name: path
2024-11-18T16:03:26.9174564Z   OK https://humana.jfrog.io/artifactory/api/nuget/v3/cgx-nuget-virtual/registration-semver2/Download/system.io.packaging/4.7.0 256ms
2024-11-18T16:03:26.9324438Z System.ArgumentNullException: Value cannot be null.
2024-11-18T16:03:26.9324849Z Parameter name: path
2024-11-18T16:03:26.9325208Z    at System.IO.Path.GetFullPathInternal(String path)
2024-11-18T16:03:26.9325572Z    at NuGet.Commands.RestoreCommand.GetAssetsFilePath(LockFile lockFile)
2024-11-18T16:03:26.9326050Z    at NuGet.Commands.RestoreCommand.<ExecuteAsync>d__45.MoveNext()
2024-11-18T16:03:26.9344973Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9345482Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9346010Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9346580Z    at NuGet.Commands.RestoreRunner.<ExecuteAsync>d__7.MoveNext()
2024-11-18T16:03:26.9347237Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9347724Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9348310Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9348895Z    at NuGet.Commands.RestoreRunner.<ExecuteAndCommitAsync>d__6.MoveNext()
2024-11-18T16:03:26.9349408Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9350475Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9350866Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9351312Z    at NuGet.Commands.RestoreRunner.<CompleteTaskAsync>d__9.MoveNext()
2024-11-18T16:03:26.9351661Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9352015Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9352657Z    at NuGet.Commands.RestoreRunner.<RunAsync>d__2.MoveNext()
2024-11-18T16:03:26.9353011Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9353427Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9353812Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9354191Z    at NuGet.Commands.RestoreRunner.<RunAsync>d__0.MoveNext()
2024-11-18T16:03:26.9354587Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9354936Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9355305Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9355711Z    at NuGet.Commands.RestoreRunner.<RunAsync>d__1.MoveNext()
2024-11-18T16:03:26.9356034Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9356373Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9356773Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9357194Z    at NuGet.CommandLine.RestoreCommand.<ExecuteCommandAsync>d__52.MoveNext()
2024-11-18T16:03:26.9357553Z --- End of stack trace from previous location where exception was thrown ---
2024-11-18T16:03:26.9358559Z    at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
2024-11-18T16:03:26.9358954Z    at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
2024-11-18T16:03:26.9360561Z    at NuGet.CommandLine.Command.Execute()
2024-11-18T16:03:26.9362060Z    at NuGet.CommandLine.Program.MainCore(String workingDirectory, String[] args)
2024-11-18T16:03:27.0618830Z 11:03:27 [Info] Trace ID for JFrog Platform logs: 113cc81fcab7287b
2024-11-18T16:03:27.1057871Z 11:03:27 [Error] exit status 1
2024-11-18T16:03:27.1136225Z ##[debug]task result: Failed
2024-11-18T16:03:27.1137867Z ##[error]Error: Command failed: F:\tfs\_work\_tool\jf\2.71.3\x64\jf.exe nuget restore -PackagesDirectory "F:\\tfs\\_work\\13179\\s" -Verbosity "Detailed"
2024-11-18T16:03:27.1139002Z ##[debug]Processed: ##vso[task.issue type=error;]Error: Command failed: F:\tfs\_work\_tool\jf\2.71.3\x64\jf.exe nuget restore -PackagesDirectory "F:\\tfs\\_work\\13179\\s" -Verbosity "Detailed"
2024-11-18T16:03:27.1140618Z ##[debug]Processed: ##vso[task.complete result=Failed;]Error: Command failed: F:\tfs\_work\_tool\jf\2.71.3\x64\jf.exe nuget restore -PackagesDirectory "F:\\tfs\\_work\\13179\\s" -Verbosity "Detailed"
2024-11-18T16:03:27.1141563Z Executing JFrog CLI Command:
2024-11-18T16:03:27.1141948Z F:\tfs\_work\_tool\jf\2.71.3\x64\jf.exe c remove "CGX_Authorization_PCF_5511185_nuget_resolver_1731945791460" --quiet
2024-11-18T16:03:27.2891881Z ##[debug]Removing JFrog CLI build tool configuration...
2024-11-18T16:03:27.2893072Z ##[debug]rm -rf F:\tfs\_work\13179\s\.jfrog\projects
2024-11-18T16:03:27.2895238Z ##[debug]removing directory F:\tfs\_work\13179\s\.jfrog\projects
2024-11-18T16:03:27.3223109Z ##[debug]includeEnvVars=false
2024-11-18T16:03:27.3361333Z ##[section]Finishing: JFrog NuGet restore

No, Sowjanya, we shouldn’t merge the 24.12 defect fixes into this branch. The Fax on-prem branch is scheduled for production this week. Our changes align with R24.11, so we can incorporate any production fixes occurring between 11/15 and 11/21, but not SIT defects. After our release on 11/21, the application teams will need to merge the Main branch into their respective release branches.

Thanks for the heads-up, Reece. We’re planning to release the application on 11/24. If you anticipate that resolving these issues might take longer, we should notify Dan in advance.

Hi Dan,

I hope you're doing well.

I raised an access request in the “g_azure_vsts_tech_enablement2_members” group since I currently lack write access to the repository and the ability to approve pull requests.

Although I am part of both the “G_azure_vsts_Tech_Enablement5_members” and “G_azure_vsts_Tech_Enablement5_WorkAdmins” groups, I discussed this issue with Noorul, who suggested raising the request in Tech Enablement 2.

Additionally, I raised a separate request for CXOne access to be added to the “G_Azure_Security_Advocates” group, but it is pending approval from the owner. I’m unsure if this is the correct approach, especially as none of my team members can access the portal at the moment. Could you please advise?

Thank you for your help!

Hi Dan,

I raised this access request in “g_azure_vsts_tech_enablement2_members” as I don’t have write access in the repo, I don’t have approval options in pull requests as well.

Even though I am part of both “G_azure_vsts_Tech_Enablement5_members” and “G_azure_vsts_Tech_Enablement5_WorkAdmins” groups, I discussed this issue with Noorul and he suggested me to raise request in Tech Enablement 2.

I raised another request for CXOne access to get myself added in “G_Azure_Security_Advocates” group, however it’s pending in owner’s approval state.Not sure if that’s the correct approach.As none of my team members can access the portal right now. Please advice on that.



Hi Malle,

Thank you for supporting our release. As you are already aware, this is just a quick check to confirm that the following LD flags need to be created in Production with their state set to OFF.



Yes, the service deployment and the Pioneer to On-Prem cutover are scheduled for 11/21.

Yes, service deployment and Pioneer to OnPrem cutover would happen on 11/21.

Hi Team,

Apologies for the confusion regarding the service endpoints. These are not live yet, as we are currently in the process of migration. We are aiming to complete the migration and deployment of the following services by 11/22, so the production endpoints will be available after that date.

We’ve received the IP addresses for the on-prem environments. If you could ensure these IPs are within the whitelisted range, we should be all set from an integration standpoint.

Please let me know if you have any further questions.


Hi Cyndi, is it essential for the above repositories to be associated with the DAST scan for this release, or is it more of a "nice-to-have"? If we exclude CMUM_User_Service and CGX_UM_Authorization_SVC, as there were no changes made to those services in version 24.11, the remaining applications already meet compliance requirements.

Hi Priyanka,

I’ve taken some time to reflect on our discussion yesterday. I feel that the current role leans heavily towards management and coordination, with a significant amount of my energy being spent in multiple meetings throughout the day. As someone with a technical background, I’m finding that it doesn’t align as well with my long-term career path. I believe an SRE role would be a better fit for me moving forward.

If possible, could you please consider releasing me from this project so I can focus on the SRE team?

Thank you for your understanding and support.


Fast Lane Deployment & Migration Update: CGX Applications (11/21)
Hi Team,

A quick heads-up: we’re planning a fast-lane deployment for several CGX applications and services on 11/21.

This is part of our migration effort to move services from the Pioneer environment to an on-premises setup, as the Pioneer environment is scheduled for decommissioning in January 2025. This migration is strictly an environment shift, with no changes to logic or code.

For Milestone 1, we’re aiming for a First Lane release on 11/21 for affected services, aligning with the R24.11 integrated release for consuming applications. We’ve set up a LaunchDarkly flag in all consuming applications, which will initially default to OFF (pointing to Pioneer). After the on-prem deployment on 11/21, we’ll switch the flag to ON.

We’ll need your support with PPV coordination after the release to complete our part. Please let us know if you need any further details, and we can schedule a call to discuss.
Thanks,


Migration Plan Review: M1 Pioneer to On-Prem Transition

Hi Cyndi, I noticed you’re out sick today—hope you feel better soon!

I'm reaching out from the Tech Enablement 5 group regarding our migration of several services from the Pioneer environment to an on-premises setup. Since the Pioneer environment is cost-effective but scheduled for decommissioning in January 2025, this migration is purely an environment shift with no logic or code changes required.

For Milestone 1, we’re planning a First Lane release on 11/21 for these services, aligning with the integrated R24.11 application release. We’ve implemented a LaunchDarkly flag in all consuming applications, which will default to OFF (pointing to Pioneer). After the service deployment to on-prem on 11/21, we’ll switch it ON.

I’ll schedule a call with you in the morning to review the plan. Please feel free to reschedule if that time isn’t convenient for you.

Hi Jason, we've created the initial set of stories for M1, along with some for M2 and M3. I'll share these with you shortly. However, I think it would be beneficial to have a broader discussion to ensure we allocate enough code freeze time for the migrations, as we have critical timelines to meet.

We had internal discussions with the team and Noorul, and we'd like to explore with Dan the possibility of moving our services and changes without a PPV. Given the tight deadline for the Pioneer migration, we're planning to implement more frequent first-lane deployments to stay on track. We'll be speaking with Dan today to go over the updated deployment plan.
Subject: Pioneer/On-Prem URLs for QA (M1 Services)
Hi Nathika,

Could you please complete the Excel sheet with the Pioneer and on-prem URLs for the QA Stress and QA environments for M1 services?


We are migrating all services from the Pioneer environment to an on-premises setup. Since the Pioneer environment is cost-effective but scheduled for decommissioning in January 2025, this migration involves only an environment shift—no location or code changes will be required.
On the application side, we have added a flag to toggle between the on-premises and Pioneer environments. This serves as a precautionary measure, allowing us to switch back to Pioneer if any issues arise in the on-premises setup.

Hi Dan,

We've finalized the migration plan and would need your assistance with the following challenges:

For Milestone 1, DevOps alignment is completed, but we need to merge the changes into the main branch to prevent GLAPI failures. This requires us to complete the migration on two separate dates: 15/11 with the regular release for applications with the Switching LD flag turned OFF, and then switching it ON on 21/11 alongside the service deployment. This will be a first-line deployment.

PPV validation alignment is needed for our release on 21/11 and switching ON to the on-premises environment. Without alignment, we won’t be able to switch the application ON until the next integrated release in December.

For Milestones 3 and 4, the code freeze dates are highlighted in the attached Excel file. Please help us coordinate team alignment for a smoother migration timeline.

Please let us know if you need any further information so we can arrange a call to discuss.

Thank you!

1. For Milestone 1 Devops alignment completed, we need to merge the changes to main otherwise GLAPI will fail so needed us to complete migration in 2 different dates(15/11 with regular release for applications with Switching LD flag OFF and then turning it on 21/11 alongside service deploymnet, this is going to be a first line deployment ).
1. PPV validation alignment needed for our release on 21/11 and switching ON to the On prem environmnet.If not alighen we can't switch the appplication ON till the next integrated release in Dec.
3. For milestone 3 & 4 codefreeze dates highightedin the atached excel, please help us getting teams alighment for our migration timeline convenience.



We have finalized all M1 stories. Could you please create test cases for them and attach the QTest results to each individual story? Thank you!

Hi Team,

Could you please work on the following consuming apps and services using the respective migration branch and verify if the SAST/DAST scan reports are generated:

Letter Angular
CGX Fileshare
Letter Service
CGX Assessment Service
CGX Authorization Service
For any guidance, feel free to reach out to Sridhar. Thank you!

Hi Team,

As mentioned, we are preparing to deploy seven applications—Letter Angular, Core API, Clinical Auth Service, CGX UI, Careplan UI, CGX Fileshare, and CGX API—and six services: Letters, CGX Careplan, AUTH Validation, CGX Assessment, CGX Authorization, and CGX Fax Service as part of our Milestone 1 plan.

Considering the critical timeline and to avoid impacting the current release, we’ve decided to move our deployment to the week following the regular release date. Tentatively, we’re aiming for Services to be deployed in production on 15/11 and consuming applications on 22/11. We’ll proceed with an ICAB change order, and we’d like to confirm if we can deploy the services and dependent applications directly from the migration branch, separately from the release branch. If so, what would be the recommended approach for merging changes back from the migration branch to the main branch?

Additionally, could you please confirm the process for toggling LaunchDarkly flags in production? Specifically, do we need any approvals to enable or disable these flags in production?

Thank you for your assistance!

Hi Shiva,

We are planning to deploy seven applications: Letter Angular, Core API, Clinical Auth Service, CGX UI, Careplan UI, CGX Fileshare, and CGX API; along with six services: Letters, CGX Careplan, AUTH Validation, CGX Assessment, CGX Authorization, and CGX Fax Service.

As part of our Milestone 1 plan, we’ve completed SIT functional testing (manual) for most of these in the QA3 environment. We’d like to ask for your support with automation test scenarios and recording results in QTest, mapped to individual stories.

Could you please confirm the following:

Is there a specific environment where we should deploy the code to run automated regression?
Is there a particular branch or build required for deployment, or is deploying from the migration branch sufficient?
How do we link QTest results to the individual stories?
Approximately how long would it take to complete regression for these seven applications?
Do we have any automated load testing setup for the six services?
Thank you for your guidance!

7 applications-
Letter Angular
Core API
Clinical Auth Service
CGX UI
Careplan UI
CGX Fileshare
CGX API

6 services-
Letters
CGXCareplan
AUTH validation
CGXAssessment
CGXAuthorization
CGXFaxService


Thank you for the confirmation! I was able to edit and submit my time for today. However, for the rest of the week (28/10-31/10), 
the timesheet shows as frozen or the hours are not editable for the assigned tasks. Could you please assist by filling in the hours for the remainder of the week from the backend? 
I’ll reach out if I encounter any issues with time entry from next week onward. Thank you!

SIT Functional Testing: Manual testing for SIT has been completed in both INT and QA3 environments.

API Testing: Except for the CGX Assessment, no API testing has been conducted for the service migration. (Blocked due to pending JSON files from developers.)

Letter Service Testing: 

Functional testing of Letter Angular and Core API applications has been completed in INT.
 Clinical Auth Service and CGX UI for the Letters service have been recently deployed to QA3, but testing has not yet occurred in INT.

CGX Careplan Service: Careplan UI, Core API, and CGX Fileshare (pending in QA) have been validated in both INT and QA3. CGX Fileshare testing can be completed today if a developer becomes available.

CGX Assessment Service: Testing of CGX UI for this service has been completed in both INT and QA.

CGX Authorization Service: Testing of CGX API, CGX UI, and Clinical Auth Service has been completed in QA.

Fax Service Testing: The CGX UI for Fax Service has recently been deployed in QA3, with no testing yet conducted in INT.

Reporting: Currently, all applications for a given service are grouped together, with a consolidated QTest report available that combines all applications pointing to each respective service.

SIT functional testing (Manual) has been done in INT & QA3.

NO API testing other than CGXAssessment was done for the service migration.(Blocked/Need JSON from Developers) 

Application - Letter Angular, Core API for letters service function testing completed in INT,

Application - Clinical Auth Service, CGX UI these application for letters service recetly deployed in QA3, no testing done on INT.

Application - Careplan UI, Core API, CGX Fileshare(Pending in QA) for CGXCareplan service all are validated in INT and QA3.If we get a dev then CGX Fileshare testing cn be completed today.

Application - CGX UI for CGXAssessment service done in INT and QA.

Application - CGX API,CGX UI,Clinical Auth Service for CGXAuthorization servicedone in QA

Application - CGX UI for fax service application recetly deployed in QA3, no testing done on INT.

Currently all application for a service is clubbed together and QTest report is availabe for all application pointing to a single services together.


We're fast-tracking the Milestone 1 release with isolated branch changes, aiming for deployment on 15/11 and app toggle on 22/11, pending ICAB approval and SRE/DevOps support

For the Milestone 1 release, we are already significantly behind the regular release cycle, so we plan to fast-track deployment. 
Our changes are isolated in a separate branch (not in the release branch). As part of the service deployment,
we intend to execute the change order for the services on 15/11, which will establish the on-premises environment. 
For the changes on the consuming apps side, we’re aiming for a scheduled release on 22/11, 
where we will implement a switch in the consuming apps to toggle from the Pioneer to the on-prem solution.

We have completed manual QA regression on our side, but we still need to wait for automated regression 
and load test results to validate and compare. We are treating this as an Infrastructure Change Order (ICAB) 
and would like to proceed on the mentioned dates. Your and the VP's approval is requested, 
along with support from the SRE and DevOps teams for the release activities.


I tried searching for the course by name or ID but couldn’t locate it. It seems it may need to be assigned to me for access. Could you please check on this?

M1-CGXCareplan: Migration of CGX Careplan Pioneer to On-Premises Service

The CGX Careplan Pioneer service is scheduled for sunset in January, with no planned renewal. To ensure service continuity, we must migrate all infrastructure associated with Pioneer to an on-premises environment through a lift-and-shift approach. This migration will involve setting up the on-premises infrastructure, ensuring full functional validation post-migration, and confirming compliance with all security and performance standards.

All components of the Pioneer service infrastructure are successfully migrated to the on-premises environment.
Network settings, data storage, and other resources are configured to match the current setup.
Functional validation is completed to confirm all features operate as expected in the on-premises setup.


Hi Becky, it seems that both SitecoreService and SiteScope are no longer necessary. Since the Sitecore applications aren’t active, 
the service account is also no longer needed. SiteScope monitoring was scheduled to sunset as early as 2021, 
and all applications were expected to transition to Dynatrace monitoring from that point. 
To answer your question, both are legacy and no longer required.

Slide 1: Hurdles for Pioneer Migration (Milestone 2 & 3)
Toggle Key Features Update

Excluding Humana.Clinical.Cgx.AuthUpdateUtility, other Toggle Key features removed from Milestones 2 and 3.
Streamlined as config-only updates, reducing team overhead and accelerating the timeline.
Single Branch Deployment

Transition to a single branch deployment model.
Application teams required to merge changes from the default branch independently as platform changes progress.
Limited Rollback Support

Minimal rollback options; parallel old-new system testing is restricted due to tight deadlines.
Issues to be handled with immediate resolutions to maintain stability.
Stakeholder Management

Complexity in maintaining stakeholder communication on the migration process, risks, and critical timelines.
Slide 2: Expectations and Preparations for Migration
Setting Realistic Performance Expectations

Transparent expectations around potential performance drops and downtimes during migration phases.
Data Clarity for Compliance

Identify data types within Pioneer for data security and compliance aligned with Data Governance requirements.
Post-Migration Monitoring

Limited insights on performance, error tracking, logs, and metrics post-migration due to Dynatrace and Splunk transitions.
Incident Handling Runbook

Prepare a runbook for incident management post-migration, specifying no rollback requirements for streamlined issue handling.
Traffic Results and Benchmarking

Collect necessary information to traffic and compare results, enabling accurate benchmarking post-migration.

Removing Toggle Key features from milestone 2 and 3 except for Humana.Clinical.Cgx.AuthUpdateUtility, which consumes ClinicalAuthorization
Single branch deployment going forward, if any application team wants to integrate our changes it's their responsibility to merge from default branch as this is a platform level changes.
Little to no support of roll back for the upcoming milestones not much option to run the old and new systems in parallel to ensure stability as the timeline is critical so any issues occurs we need to resolve it. 
Difficulty in maintaining stakeholders about migration process, risk and timelines
Establish realistic expactation regarding performace and potential downtimes during the migration
Clarity on kind of data that has been stored in pioneer platform for data security and compliance(Data govonance team)
no clarity on monitoring performace, errors, logs, matrics post migration tuning -- Onprem already hosted installed dynatrace switching, splunk
Create runbook for any incident handling for post migration issues -- no need for runbook
need information to traffic results to compare


Our action item for cgx_faxservice is to merge the code into our branch, deploy it in INT, and inform the team to initiate another round of SIT.

He is currently facing a certificate issue in his local environment for the Clinical Auth Service. The simplest solution would be to remove the feature flag and directly update the configuration for the Auth service. Considering the future projections, it seems reasonable to proceed without the feature flag to avoid being blocked by the certificate issue. Could you please confirm this exception, or should we seek additional support for him soon?







